"use strict";(self["webpackChunkciclo3_front_mtic"]=self["webpackChunkciclo3_front_mtic"]||[]).push([[721],{7531:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var o=n(3396),i=n(9242),s=n(7139);const r=e=>((0,o.dD)("data-v-78d468b5"),e=e(),(0,o.Cn)(),e),a={class:"put_patient"},d=r((()=>(0,o._)("h1",null,"Asigne al Paciente",-1))),l=r((()=>(0,o._)("label",{for:"doctor"},"doctor(a)",-1))),c=r((()=>(0,o._)("option",{value:""},"Seleccione un doctor(a)",-1))),u=["value"],p=r((()=>(0,o._)("label",{for:"nurse"},"enfermer@",-1))),h=r((()=>(0,o._)("option",{value:""},"Seleccione un enfermer@",-1))),g=["value"],m=r((()=>(0,o._)("label",{for:"kindred"},"familiar",-1))),k=r((()=>(0,o._)("option",{value:""},"Seleccione un familiar",-1))),w=["value"],f=r((()=>(0,o._)("div",null,[(0,o._)("span",{style:{"margin-bottom":"10px"}},"Puede dejar campos sin seleccionar")],-1))),v=r((()=>(0,o._)("button",null,"Actualizar",-1)));function _(e,t,n,r,_,D){return(0,o.wg)(),(0,o.iD)("div",a,[d,(0,o._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)(((...e)=>D.updatePatient&&D.updatePatient(...e)),["prevent"]))},[(0,o._)("div",null,[l,(0,o.wy)((0,o._)("select",{name:"doctor",id:"doctor",onChange:t[0]||(t[0]=(...e)=>D.handleDoctor&&D.handleDoctor(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>_.form.doctor=e)},[c,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.doctors,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id},(0,s.zw)(e.name),9,u)))),256))],544),[[i.bM,_.form.doctor]])]),(0,o._)("div",null,[p,(0,o.wy)((0,o._)("select",{name:"nurse",id:"nurse",onChange:t[2]||(t[2]=(...e)=>D.handleNurse&&D.handleNurse(...e)),"onUpdate:modelValue":t[3]||(t[3]=e=>_.form.nurse=e)},[h,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.nurses,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id},(0,s.zw)(e.name),9,g)))),256))],544),[[i.bM,_.form.nurse]])]),(0,o._)("div",null,[m,(0,o.wy)((0,o._)("select",{name:"kindred",id:"kindred",onChange:t[4]||(t[4]=(...e)=>D.handleKindred&&D.handleKindred(...e)),"onUpdate:modelValue":t[5]||(t[5]=e=>_.form.kindred=e)},[k,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.kindreds,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id},(0,s.zw)(e.name),9,w)))),256))],544),[[i.bM,_.form.kindred]])]),f,v],32)])}n(7658);var D=n(6265),y=n.n(D),b={name:"RegisterWithRoles",data(){return{patientId:"",attributes:{required:!0},form:{doctor:"",nurse:"",kindred:""},update:{},doctors:[],kindreds:[],nurses:[],types:{doctor:"doctor(a)",nurse:"enfermer@",assistant:"asistente",patient:"paciente",kindred:"familiar"}}},methods:{handleDoctor(){this.form.doctor&&y().get("https://ciclo3-backend.onrender.com/api/doctor/",{headers:{}}).then((e=>{const t=e.data.find((e=>e.user==this.form.doctor));console.log("doctor ",t),this.update.doctor=t.id})).catch((e=>{console.log(e)}))},handleNurse(){this.form.nurse&&y().get("https://ciclo3-backend.onrender.com/api/nurse/",{headers:{}}).then((e=>{const t=e.data.find((e=>e.user==this.form.nurse));console.log("nurse: ",t),this.update.nurse=t.id})).catch((e=>{console.log(e)}))},handleKindred(){this.form.kindred&&y().get("https://ciclo3-backend.onrender.com/api/kindred/",{headers:{}}).then((e=>{const t=e.data.find((e=>e.user==this.form.kindred));console.log("kindred: ",t),this.update.kindred=t.id})).catch((e=>{console.log(e)}))},updatePatient(){console.log(this.update),y().put(`https://ciclo3-backend.onrender.com/api/patient/${this.patientId}/`,this.update,{headers:{}}).then((e=>{console.log(e),this.$router.push("/assistant")})).catch((e=>{console.log(e)}))}},created(){const e=JSON.parse(localStorage.getItem("assistant"));e||(this.$router.push({name:"home"}),alert("No tiene permisos")),this.patientId=this.$route.params.id,y().get("https://ciclo3-backend.onrender.com/api/user/",{headers:{}}).then((e=>{this.doctors=e.data.filter((e=>"doctor"===e.type)),this.kindreds=e.data.filter((e=>"kindred"===e.type)),this.nurses=e.data.filter((e=>"nurse"===e.type))})).catch((e=>{console.log(e)}))}},H=n(89);const K=(0,H.Z)(b,[["render",_],["__scopeId","data-v-78d468b5"]]);var Y=K},6184:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var o=n(3396),i=n(9242),s=n(7139);const r={class:"with_roles"},a=(0,o._)("div",{class:"title"},[(0,o._)("h1",null,"Panel de Asistente")],-1),d={class:"action"},l=(0,o._)("label",{for:"action"},"¿Qué acción desea realizar?",-1),c=(0,o._)("option",{value:"post"},"Registrar usuario por rol",-1),u=(0,o._)("option",{value:"get"},"Consultar Pacientes",-1),p=[c,u],h={key:0,class:"post"},g={class:"type"},m=(0,o._)("label",{for:"type"},"Por favor seleccione el tipo de usuario que desea registrar",-1),k=(0,o.uE)('<option value="patient">Paciente</option><option value="doctor">Doctor(a)</option><option value="nurse">Enfermer@</option><option value="assistant">Asistente</option><option value="kindred">Familiar</option>',5),w=[k],f={for:"user",id:"user_regostered"},v={value:"",hidden:""},_=["value"],D={key:1,class:"get"},y={class:"card"},b={key:0},H={key:0},K={key:0},Y={key:0},z=["onClick"];function P(e,t,n,c,u,k){return(0,o.wg)(),(0,o.iD)("div",r,[a,(0,o._)("div",d,[l,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.action=e),name:"action",id:"action"},p,512),[[i.bM,u.action]])]),"post"===u.action?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",g,[m,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.type=e),name:"type",id:"type"},w,512),[[i.bM,u.type]])]),(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,i.iM)(((...e)=>k.registerUserType&&k.registerUserType(...e)),["prevent"]))},[(0,o._)("div",null,[(0,o._)("label",f,(0,s.zw)(this.types[this.type])+" Registrado",1),(0,o.wy)((0,o._)("select",(0,o.dG)({"onUpdate:modelValue":t[2]||(t[2]=e=>u.register.user=e),name:"user",id:"user"},u.attributes),[(0,o._)("option",v," Seleccione "+(0,s.zw)(this.types[this.type])+" anteriormente registrado ",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.users,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[e.type==this.type?((0,o.wg)(),(0,o.iD)("option",{key:0,value:e.id},(0,s.zw)(e.name),9,_)):(0,o.kq)("",!0)],64)))),256))],16),[[i.bM,u.register.user]])]),(0,o._)("button",null,"Registrar "+(0,s.zw)(this.types[this.type]),1)],32)])):(0,o.kq)("",!0),"get"===u.action?((0,o.wg)(),(0,o.iD)("div",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.patients,(e=>((0,o.wg)(),(0,o.iD)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.users,(t=>((0,o.wg)(),(0,o.iD)(o.HY,null,[t.id===e.user?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",null,[(0,o._)("h2",null,(0,s.zw)(t.name),1)])])):(0,o.kq)("",!0)],64)))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.users,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.doctors,(t=>((0,o.wg)(),(0,o.iD)("div",null,[t.user===e.id?((0,o.wg)(),(0,o.iD)("p",H,"doctor(a): "+(0,s.zw)(e.name),1)):(0,o.kq)("",!0)])))),256))],64)))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.users,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.nurses,(t=>((0,o.wg)(),(0,o.iD)("div",null,[t.user===e.id?((0,o.wg)(),(0,o.iD)("p",K,"enfermer@: "+(0,s.zw)(e.name),1)):(0,o.kq)("",!0)])))),256))],64)))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.users,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.kindreds,(t=>((0,o.wg)(),(0,o.iD)("div",null,[t.user===e.id?((0,o.wg)(),(0,o.iD)("p",Y,"familiar: "+(0,s.zw)(e.name),1)):(0,o.kq)("",!0)])))),256))],64)))),256)),(0,o._)("div",null,[(0,o._)("button",{onClick:t=>k.updatePatient(e.id)},"Editar",8,z)])])))),256))])):(0,o.kq)("",!0)])}n(7658);var U=n(6265),q=n.n(U),S={name:"RegisterWithRoles",data(){return{type:"patient",action:"post",attributes:{required:!0},register:{user:""},users:[],patients:[],kindreds:[],doctors:[],nurses:[],types:{doctor:"doctor(a)",nurse:"enfermer@",assistant:"asistente",patient:"paciente",kindred:"familiar"}}},methods:{getUsers(){q().get("https://ciclo3-backend.onrender.com/api/user/",{headers:{}}).then((e=>{this.users=e.data})).catch((e=>{console.log(e)}))},getPatients(){q().get("https://ciclo3-backend.onrender.com/api/patient/",{headers:{}}).then((e=>{this.patients=e.data})).catch((e=>{console.log(e)}))},getDoctors(){q().get("https://ciclo3-backend.onrender.com/api/doctor/",{headers:{}}).then((e=>{this.doctors=e.data})).catch((e=>{console.log(e)}))},getNurses(){q().get("https://ciclo3-backend.onrender.com/api/nurse/",{headers:{}}).then((e=>{this.nurses=e.data})).catch((e=>{console.log(e)}))},getKindreds(){q().get("https://ciclo3-backend.onrender.com/api/kindred/",{headers:{}}).then((e=>{this.kindreds=e.data})).catch((e=>{console.log(e)}))},updatePatient(e){this.$router.push({name:"assistant_edit_user",params:{id:e}})},registerUserType(){q().post(`https://ciclo3-backend.onrender.com/api/${this.type}/`,this.register).then((e=>{console.log(e)})).catch((e=>{this.register.user="",alert(e.response.data.user[0])}))}},created(){const e=JSON.parse(localStorage.getItem("assistant"));e||(alert("No tiene permisos"),this.$router.push({name:"home"})),this.getUsers(),this.getPatients(),this.getDoctors(),this.getNurses(),this.getKindreds()}},C=n(89);const N=(0,C.Z)(S,[["render",P]]);var M=N}}]);
//# sourceMappingURL=assistant.d4eff3c5.js.map